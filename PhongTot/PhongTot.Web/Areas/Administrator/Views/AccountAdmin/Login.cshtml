@using PhongTot.Web.Models
@model LoginViewModel
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Login</title>
    <link href="~/Content/Admin/fonts/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link href="~/Content/Admin/css/styles.css" rel="stylesheet" />
</head>
<body class="focused-form">
    <div class="container" id="login-form">
        <div class="login-logo">
            <img width="300" src="~/Content/Client/img/logo.png" />
        </div>
        <div class="row">
            <div class="col-md-4 col-md-offset-4">
                <div class="panel panel-default">
                    <div class="panel-heading"><h2>Đăng nhập</h2></div>
                    <div class="panel-body">

                        @using (Html.BeginForm("Login", "AccountAdmin", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { role = "form", @class = "form-horizontal", @id = "validate-form" }))
                        {
                            <div id="alert">
                                <span id="login_error">
                                    @ViewBag.message
                                </span>
                            </div>
                            @Html.AntiForgeryToken()
                            @Html.ValidationMessage("CustomError")
                            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                            <div class="form-group">
                                <div class="col-xs-12">
                                    <div class="input-group">
                                        <span class="input-group-addon">
                                            <i class="fa fa-user"></i>
                                        </span>
                                        @Html.TextBoxFor(m => m.Email, new { @class = "form-control", id = "Email", placeholder = "Nhập Email của bạn....." })
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-xs-12">
                                    <div class="input-group">
                                        <span class="input-group-addon">
                                            <i class="fa fa-key"></i>
                                        </span>
                                        @Html.PasswordFor(m => m.Password, new { @class = "form-control", id = "Password", placeholder = "Mật Khẩu....." })
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-xs-12">
                                    <a href="extras-forgotpassword.html" class="pull-left">Quên mật khẩu?</a>
                                    <div class="pull-right pt0">
                                        <label for="">
                                            @Html.CheckBoxFor(m => m.RememberMe, new { id = "RememberMe" })
                                            Nhớ tài khoản
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <div class="panel-footer">
                                <div class="clearfix">
                                    <a href="extras-registration.html" class="btn btn-default pull-left">Đăng Kí</a>
                                    <button type="submit" onclick="return fosp_login();" class="btn btn-primary pull-right">Đăng Nhập</button>
                                </div>
                            </div>
                        }
                    </div>
                </div>
                <div class="text-center">
                    <a href="#" class="btn btn-label btn-social btn-facebook mb20"><i class="fa fa-fw fa-facebook"></i>Đăng nhập Facebook</a>
                    <a href="#" class="btn btn-label btn-social btn-googleplus mb20"><i class="fa fa-fw fa-google-plus"></i>Đăng nhập Google</a>
                </div>
            </div>
        </div>
    </div>
    <script src="~/Content/Admin/js/jquery-1.10.2.min.js"></script>
    <script type="text/javascript">
        //fix đường dẫn khi login bằng facebook
        if (window.location.hash == '#_=_') {
            history.replaceState
                ? history.replaceState(null, null, window.location.href.split('#')[0])
                : window.location.hash = '';
        }


        function fosp_login() {

            jQuery('#login_error').html('');
            jQuery('input[type="text"], input[type="password"]').removeClass('validation-failed');
            email = jQuery('#Email').val();
            pass = jQuery('#Password').val();
            if (email == '') {
                jQuery('#Email').addClass('alert-danger');
                jQuery('#alert').removeClass('hidden');
                jQuery('#login_error').html('Vui lòng nhập địa chỉ email.');
                jQuery('#Email').focus();
                return false;
            }
            email_pattern = /^[a-zA-Z0-9_.-]+@@[a-zA-Z0-9]+[a-zA-Z0-9.-]+[a-zA-Z0-9]+.[a-z]{0,4}$/;
            if (!email.match(email_pattern)) {
                jQuery('#Email').addClass('validation-failed');
                jQuery('#login_error').html('Địa chỉ email không hợp lệ.');
                jQuery('#Email').focus();
                return false;
            }

            if (pass == '') {
                jQuery('#Password').addClass('validation-failed');
                jQuery('#login_error').html('Vui lòng nhập mật khẩu đăng nhập.');
                jQuery('#Password').focus();
                return false;
            }


            if (jQuery('#login_error').html() != '') {
                return false;
            } else {
                return true;
            }

        }
    </script>
</body>
</html>
